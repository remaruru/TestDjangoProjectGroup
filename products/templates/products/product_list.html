{% extends 'base.html' %}

{% block title %}Explore | NovaMarket{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero">
    <h1>Discover Unique Products from<br>Trusted Sellers</h1>
    <p>Shop smarter. Sell faster. Grow globally.</p>
    <div class="hero-actions">
        <a href="#product-grid" class="btn btn-primary">Start Shopping</a>
        <a href="{% url 'users:seller_signup' %}" class="btn btn-secondary">Become a Seller</a>
    </div>
</div>

<!-- Main Content Area with Sidebar and Grid -->
<div class="content-area" id="product-grid">

    <!-- Filters Sidebar -->
    <aside class="filters-sidebar">
        <div class="sidebar-section">
            <h5 class="sidebar-title">Categories</h5>
            <div class="checkbox-group">
                <a href="{% url 'home' %}"
                    style="display:block; margin-bottom:0.5rem; {% if not selected_category %}font-weight:700; color:var(--primary);{% else %}color:var(--text-secondary);{% endif %}">All
                    Categories</a>
                {% for cat in categories %}
                <a href="?category={{ cat.slug }}"
                    style="display:block; margin-bottom:0.5rem; {% if selected_category == cat.slug %}font-weight:700; color:var(--primary);{% else %}color:var(--text-secondary);{% endif %}">
                    {{ cat.name }}
                </a>
                {% endfor %}
            </div>
        </div>

        <div class="sidebar-section">
            <h5 class="sidebar-title">Price Range</h5>
            <input type="range" class="range-slider" min="0" max="1000">
            <div
                style="display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-secondary); margin-top:0.5rem;">
                <span>$0</span>
                <span>$1000+</span>
            </div>
        </div>
    </aside>

    <!-- Product Grid -->
    <div class="product-grid">
        {% for product in products %}
        <div class="product-card">
            <a href="{% url 'products:detail' product.pk %}" class="card-image-wrapper">
                {% if product.image_url %}
                <img src="{{ product.image_url }}" class="card-image" alt="{{ product.title }}">
                {% else %}
                <img src="https://placehold.co/400x400/EEE/31343C?text={{ product.title|urlencode }}" class="card-image"
                    alt="{{ product.title }}">
                {% endif %}

                <!-- Random badge logic for demo -->
                {% if forloop.first %}
                <span class="card-badge">New</span>
                {% endif %}
            </a>

            <button class="card-wishlist-btn" title="Add to Wishlist">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
            </button>

            <div class="card-content">
                <div class="product-category">{{ product.category.name|default:"Uncategorized" }}</div>
                <a href="{% url 'products:detail' product.pk %}" class="product-title">{{ product.title }}</a>

                <div class="product-meta-row">
                    <div class="product-price">${{ product.price }}</div>
                    <div class="product-rating">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                        </svg>
                        <span>4.8</span> <!-- Static rating for now -->
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div style="grid-column: 1/-1; text-align:center; padding: 4rem;">
            <h3>No products found</h3>
            <p>Check back later or try a different category.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}