{% extends 'base.html' %}
{% block title %}My Orders | NovaMarket{% endblock %}
{% block content %}
<style>
    .status-badge {
        padding: 0.35rem 0.75rem;
        border-radius: 99px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    .status-pending {
        background: #fef3c7;
        color: #92400e;
    }

    .status-confirmed {
        background: #dcfce7;
        color: #166534;
    }

    .status-rejected {
        background: #fee2e2;
        color: #991b1b;
    }

    .status-default {
        background: #f3f4f6;
        color: #374151;
    }
</style>
<div class="dashboard-wrapper" style="padding: 2rem 0; max-width: 1200px; margin: 0 auto;">
    <div style="margin-bottom: 2.5rem; padding: 0 1rem;">
        <h1 style="font-weight: 800; color: #111827; margin: 0;">My Orders</h1>
        <p style="color: #6b7280; margin-top: 0.5rem;">Track and manage your offers sent to sellers.</p>
    </div>
    <div
        style="background: white; border-radius: 16px; border: 1px solid #e5e7eb; overflow: hidden; margin: 0 1rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);">
        <div
            style="padding: 1.5rem; border-bottom: 1px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0; font-weight: 700;">Order History</h3>
            <span style="color: #6b7280; font-size: 0.85rem;">Total:
                {{ my_orders.count }}
            </span>
        </div>
        {% if my_orders %}
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
                <thead>
                    <tr
                        style="background: #f9fafb; border-bottom: 1px solid #f3f4f6; text-align: left; color: #6b7280;">
                        <th style="padding: 1rem 1.5rem;">Order ID</th>
                        <th style="padding: 1rem;">Seller</th>
                        <th style="padding: 1rem;">Date</th>
                        <th style="padding: 1rem;">Total</th>
                        <th style="padding: 1rem;">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in my_orders %}
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 1rem 1.5rem; font-weight: 600; color: #4f46e5;">#
                            {{ order.id }}
                        </td>
                        <td style="padding: 1rem; color: #374151;">@
                            {{ order.seller.username }}
                        </td>
                        <td style="padding: 1rem; color: #6b7280;">
                            {{ order.created_at|date:"M d, Y" }}
                        </td>
                        <td style="padding: 1rem; font-weight: 700; color: #111827;">$
                            {{ order.total_price }}
                        </td>
                        <td style="padding: 1rem;">
                            <span
                                class="status-badge {% if order.status == 'PENDING' %}status-pending{% elif order.status == 'CONFIRMED' %}status-confirmed{% elif order.status == 'REJECTED' %}status-rejected{% else %}status-default{% endif %}">
                                {{ order.get_status_display }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div style="padding: 4rem 2rem; text-align: center; color: #6b7280;">
            <p>You haven't placed any orders yet.</p>
            <a href="{% url 'products:list' %}" style="color: #4f46e5; font-weight: 600; text-decoration: none;">Start
                browsing products â†’</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}